<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Aaradhya </title>
<style>
body { margin:0; font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #f8c8dc, #a0e7e5);
  display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; overflow:hidden;}
h1{margin-bottom:50px;font-size:3em;color:#ff3e96;text-align:center;}
.cake-container{position:relative;width:200px;height:300px;cursor:pointer;}
.cake-layer{position:absolute;width:200px;height:50px;border-radius:10px;bottom:0;left:0;opacity:0;transform:translateY(50px);transition:all 0.6s ease;}
.cake-layer:nth-child(1){background:#ff9999;bottom:0;}
.cake-layer:nth-child(2){background:#ffcc99;bottom:50px;}
.cake-layer:nth-child(3){background:#ffccff;bottom:100px;}
.cake-layer:nth-child(4){background:#ffff99;bottom:150px;}
.candle{position:absolute;width:10px;height:30px;background:#ffdd00;border-radius:5px;opacity:0;transform:translateY(-20px);transition:all 0.5s ease;z-index:10;}
.flame{position:absolute;width:6px;height:10px;background:orange;border-radius:50%;top:-10px;left:2px;animation:flicker 0.2s infinite alternate;}
@keyframes flicker{0%{transform:scale(1);opacity:1;}100%{transform:scale(1.2);opacity:0.7;}}
canvas{position:fixed;top:0;left:0;pointer-events:none;z-index:9999;}
#wishPopup{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:10000;opacity:0;transition:opacity 0.5s ease;}
#wishPopup.show{opacity:1;}
#wishPopupContent{background:#fff;padding:30px;border-radius:15px;text-align:center;max-width:400px;}
#wishPopupContent input{width:80%;padding:10px;margin:15px 0;border-radius:5px;border:1px solid #ccc;font-size:1em;}
#wishPopupContent button{padding:10px 20px;font-size:1em;border:none;border-radius:5px;background:#ff3e96;color:white;cursor:pointer;}
#wishPopupContent button:hover{background:#e02e80;}
#wishDisplay{margin-top:30px;font-size:1.2em;color:#333;text-align:center;background:rgba(255,255,255,0.7);padding:15px 25px;border-radius:15px;max-width:400px;position:relative;z-index:5;}
.heart{position:absolute;font-size:20px;animation:floatUp linear infinite;opacity:0.8;pointer-events:none;}
@keyframes floatUp{0%{transform:translateY(0) scale(1);opacity:0.8;}100%{transform:translateY(-400px) scale(1.5);opacity:0;}}
.star{position:absolute;font-size:15px;color:yellow;animation:starUp linear 2s forwards;pointer-events:none;}
@keyframes starUp{0%{transform:translateY(0) scale(1);opacity:1;}100%{transform:translateY(-200px) scale(1.5);opacity:0;}}
#saveBtn{margin-top:20px;padding:10px 20px;border:none;border-radius:5px;background:#ff3e96;color:white;cursor:pointer;}
#saveBtn:hover{background:#e02e80;}
</style>
</head>
<body>

<h1>Happy Birthday Aaradhya :)! ðŸŽ‰</h1>

<div class="cake-container">
    <div class="cake-layer"></div>
    <div class="cake-layer"></div>
    <div class="cake-layer"></div>
    <div class="cake-layer"></div>
</div>

<div class="candle"><div class="flame"></div></div>

<canvas id="confetti"></canvas>

<div id="wishPopup">
    <div id="wishPopupContent">
        <h2>Make a Wish! âœ¨</h2>
        <input type="text" id="wishInput" placeholder="Type your wish here">
        <br>
        <button id="wishBtn">Submit</button>
        <p id="savedMessage" style="color:green; display:none;">Your wish is saved! ðŸŽ‰</p>
    </div>
</div>

<div id="wishDisplay"></div>
<button id="saveBtn">Save Your Cake ðŸŽ‚</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
const layers=document.querySelectorAll('.cake-layer');
const candle=document.querySelector('.candle');
const container=document.querySelector('.cake-container');
const wishPopup=document.getElementById('wishPopup');
const wishInput=document.getElementById('wishInput');
const wishBtn=document.getElementById('wishBtn');
const savedMessage=document.getElementById('savedMessage');
const wishDisplay=document.getElementById('wishDisplay');
const body=document.body;

// Cake stacking
layers.forEach((layer,i)=>{ setTimeout(()=>{ layer.style.opacity=1; layer.style.transform='translateY(0)'; }, i*600); });

// Candle position & popup
setTimeout(()=>{
    const topLayer=layers[layers.length-1];
    const layerHeight=topLayer.offsetHeight;
    const layerBottom=parseInt(window.getComputedStyle(topLayer).bottom);
    candle.style.left=(container.offsetLeft+container.offsetWidth/2-5)+'px';
    candle.style.top=(container.offsetTop+container.offsetHeight-layerBottom-layerHeight-30)+'px';
    candle.style.opacity=1;
    candle.style.transform='translateY(0)';
    wishPopup.classList.add('show');
},layers.length*600);

// Confetti background
const canvas=document.getElementById('confetti');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
const confettiCount=150;
const confetti=[];
for(let i=0;i<confettiCount;i++){ confetti.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*6+2,d:Math.random()*confettiCount,color:`hsl(${Math.random()*360},100%,50%)`}); }
function drawConfetti(){ ctx.clearRect(0,0,canvas.width,canvas.height); confetti.forEach(f=>{ ctx.fillStyle=f.color; ctx.beginPath(); ctx.arc(f.x,f.y,f.r,0,Math.PI*2); ctx.fill(); f.y+=Math.cos(f.d)+1+f.r/2; f.x+=Math.sin(f.d); if(f.y>canvas.height){ f.y=0; f.x=Math.random()*canvas.width; } }); requestAnimationFrame(drawConfetti); }
drawConfetti();

// Floating hearts
function createHeart(){
    const heart=document.createElement('div');
    heart.className='heart';
    heart.style.left=(container.offsetLeft+Math.random()*container.offsetWidth)+'px';
    heart.style.bottom='50px';
    heart.textContent='ðŸ’–';
    heart.style.animationDuration=(3+Math.random()*2)+'s';
    body.appendChild(heart);
    setTimeout(()=>{ heart.remove(); },4000);
}
setInterval(createHeart,500);

// Cake click Easter egg
let cakeClicks=0;
container.addEventListener('click',()=>{
    cakeClicks++;
    if(cakeClicks===3){
        alert("ðŸŽ‡ You found the secret! Happy Birthday! ðŸŽ‡");
        cakeClicks=0;
    }
});

// Submit wish (Flask backend)
wishBtn.addEventListener('click', async()=>{
    const wish=wishInput.value.trim();
    if(wish!==''){
        const response=await fetch('/submit_wish',{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({wish})
        });
        if(response.ok){
            wishDisplay.textContent="Her wish submitted! ðŸŽ‰";
            savedMessage.style.display='block';
            wishPopup.classList.remove('show');
            setTimeout(()=>{ wishPopup.style.display='none'; },500);

            candle.querySelector('.flame').style.display='none';

            // Confetti burst
            for(let i=0;i<100;i++){
                const burst=document.createElement('div');
                burst.style.position='absolute';
                burst.style.width='6px';
                burst.style.height='6px';
                burst.style.background=`hsl(${Math.random()*360},100%,50%)`;
                burst.style.left=(container.offsetLeft+container.offsetWidth/2)+'px';
                burst.style.top=(container.offsetTop)+'px';
                burst.style.borderRadius='50%';
                burst.style.zIndex=9999;
                body.appendChild(burst);
                const xEnd=(Math.random()-0.5)*200;
                const yEnd=-Math.random()*200;
                burst.animate([{transform:'translate(0,0)',opacity:1},{transform:`translate(${xEnd}px,${yEnd}px)`,opacity:0}],{duration:1000,easing:'ease-out'});
                setTimeout(()=>{ burst.remove(); },1000);
            }

            // Stars floating
            for(let i=0;i<15;i++){
                const star=document.createElement('div');
                star.className='star';
                star.style.left=(container.offsetLeft+container.offsetWidth/2+(Math.random()-0.5)*50)+'px';
                star.style.top=(container.offsetTop)+'px';
                star.textContent='ðŸŒŸ';
                body.appendChild(star);
                setTimeout(()=>{ star.remove(); },2000);
            }
        }
    }
});

// Save screenshot
const saveBtn=document.getElementById('saveBtn');
saveBtn.addEventListener('click',()=>{
    html2canvas(document.body).then(canvas=>{
        const link=document.createElement('a');
        link.download='birthday_cake.png';
        link.href=canvas.toDataURL();
        link.click();
    });
});
</script>
</body>
</html>
